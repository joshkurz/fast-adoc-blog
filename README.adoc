= fast-adoc-blog ⚡

:icons: font
:sectanchors:
:source-highlighter: rouge

....
    _
     /^\
    /___\
   |=   =|
   |     |
   |     |
   |     |
   |     |
   |     |
  /|##!##|\
   / |##!##| \
  /  |##!##|  \
 |  / ^ | ^ \  |
 | /  ( | )  \ |
 |/   ( | )   \|
   ((   ))
  ((  :  ))
  ((  :  ))
   ((   ))
    (( ))
     ( )
    .
    .
    .
  fast-adoc-blog 🚀
....

A fast, zero-config blogging kit for https://asciidoc.org[AsciiDoc] lovers.
Write in `.adoc` → push to GitHub → auto-deploy on https://vercel.com[Vercel].
Includes an interactive `/setup` page to enable comments (giscus or Waline) and add future JavaScript features with ease.

toc::[]

== ✨ Features

* 📝 *AsciiDoc-first*: write posts in `.adoc`.
* ⚡ *Instant deploys*: optimized for Vercel + GitHub.
* 💬 *Built-in comments*: choose *giscus* (no backend) or *Waline* (social login) via `/setup`.
* 🔌 *Custom JS ready*: drop scripts in `/public/js` or create Vercel Functions in `/api`.
* 🧩 *Simple config*: one `config.json` written from the Setup UI.
* 🚀 *MIT-licensed*: fork, remix, share freely.

== 🚀 Quick Start

Follow these steps to run the site locally and deploy to Vercel.

. 1 — Install dependencies

  ```bash
  npm install
  ```

. 2 — Start the development server (live reload)

  ```bash
  npm run dev
  ```

  By default Eleventy serves the site at http://localhost:8080 — the port is printed in the terminal.

. 3 — Build for production

  ```bash
  npm run build
  ```

  The static output is written to the `_site/` directory (the value used in `vercel.json`).

. 4 — Clean build output

  ```bash
  npm run clean
  ```

. 5 — Write a post

  Add `.adoc` files to `src/posts/` (example: `src/posts/hello.adoc`). Eleventy + Asciidoctor will render them to `_site/posts/`.

. 6 — Configure comments (optional)

  Visit `/setup` on your deployed site and choose **giscus** or **Waline**. To allow the Setup UI to write `config.json` back to your repo you'll need to set environment variables (see notes below).

. 7 — Deploy to Vercel

  - Connect your repository on https://vercel.com and set the build command to `npm run build` and the output directory to `_site`.

[NOTE]
====
To enable the Setup page to save the generated `config.json` back to your repository you must set the following environment variables in Vercel (or locally for testing):

* `VERCEL_GITHUB_TOKEN` — a personal access token with `repo` scope
* `GITHUB_REPO` — the repo slug, for example `youruser/fast-adoc-blog`

If you don't set them, the Setup UI still works in preview mode (it stores the config in `localStorage`) and you can copy & commit the JSON manually.
====

[NOTE]
====
The Setup page can save `config.json` back to your repo if you set:

* `VERCEL_GITHUB_TOKEN` (PAT with `repo` scope)
* `GITHUB_REPO` (e.g., `youruser/fast-adoc-blog`)

If you don’t set them, Setup still works in *preview mode* (stores in `localStorage`). You can copy the JSON and commit manually.
====

== 💬 Comments Options

* *giscus* → GitHub Discussions, no backend required.
* *Waline* → Serverless backend (Vercel deploy), supports Google/GitHub/Twitter/Facebook logins.

You can switch anytime at `/setup`.

== 🛠 Adding Custom Features

=== Client-only JS

Place files in `/public/js/` and reference them in `base.njk`:

[source,html]
----
<script src="/js/feature.js" defer></script>
----

*Example: a tiny pageview counter using `localStorage`*:

[source,javascript]
----
// public/js/feature.js
(() => {
  const k = "pageviews:" + location.pathname;
  const n = (parseInt(localStorage.getItem(k), 10) || 0) + 1;
  localStorage.setItem(k, n);
  const el = document.querySelector("[data-pageviews]");
  if (el) el.textContent = n.toString();
})();
----

In a template:

[source,html]
----
<span data-pageviews>0</span> views
----

=== Vercel Functions (serverless)

Add files in `/api/` — they deploy as endpoints automatically:

[source,javascript]
----
// api/ping.js
export default () =>
  new Response(JSON.stringify({ ok: true }), {
    headers: { "content-type": "application/json" }
  });
----

Client call:

[source,javascript]
----
fetch("/api/ping").then(r => r.json()).then(console.log);
----

=== Edge Functions (low latency)

[source,javascript]
----
export const config = { runtime: "edge" };

export default async function handler(req) {
  const url = new URL(req.url);
  const name = url.searchParams.get("name") || "world";
  return new Response(`hello, ${name}`, {
    headers: { "content-type": "text/plain" }
  });
}
----

== 🗂 Project Structure

[source,text]
----
fast-adoc-blog/
├─ src/
│  ├─ posts/        # your .adoc posts
│  ├─ _includes/    # templates (base, post, comments, setup)
│  └─ index.njk     # homepage
├─ public/          # static assets (css, js)
├─ api/             # optional serverless/edge functions
├─ config.json      # generated by /setup (comments config)
├─ .eleventy.js     # 11ty + AsciiDoc config
├─ package.json
└─ vercel.json
----

== 🔧 Configuration (generated)

The interactive `/setup` page writes a small `config.json`:

[source,json]
----
{
  "commentsProvider": "giscus",
  "giscus": {
    "repo": "",
    "repoId": "",
    "category": "",
    "categoryId": "",
    "mapping": "pathname",
    "theme": "light",
    "lang": "en"
  },
  "waline": {
    "serverURL": ""
  }
}
----

[TIP]
====
You can keep `commentsProvider` set to `off` to disable comments entirely.
====

== 🧪 Demo Post: `src/posts/hello.adoc`

[source,adoc]
----
= Hello, AsciiDoc
:page-layout: post.njk
:toc:

This is an `.adoc` post rendered by 11ty via Asciidoctor.

== Why AsciiDoc?

* Rich semantics and attributes
* Includes, macros, and callouts
* Plays great with CI/CD

toc::[]
----

== 📦 Scripts

[source,json]
----
{
  "scripts": {
    "dev": "ELEVENTY_ENV=development npx @11ty/eleventy --serve",
    "build": "npx @11ty/eleventy",
    "clean": "rm -rf _site"
  }
}
----

== 📜 License

MIT — use, share, remix freely. Contributions welcome via PRs & Issues.

== ❤️ Credits

Built with AsciiDoc, Eleventy, and Vercel.
