= fast-adoc-blog âš¡

:icons: font
:sectanchors:
:source-highlighter: rouge

....
    _
     /^\
    /___\
   |=   =|
   |     |
   |     |
   |     |
   |     |
   |     |
  /|##!##|\
   / |##!##| \
  /  |##!##|  \
 |  / ^ | ^ \  |
 | /  ( | )  \ |
 |/   ( | )   \|
   ((   ))
  ((  :  ))
  ((  :  ))
   ((   ))
    (( ))
     ( )
    .
    .
    .
  fast-adoc-blog ğŸš€
....

A fast, zero-config blogging kit for https://asciidoc.org[AsciiDoc] lovers.
Write in `.adoc` â†’ push to GitHub â†’ auto-deploy on https://vercel.com[Vercel].
Includes an interactive `/setup` page to enable comments (giscus or Waline) and add future JavaScript features with ease.

toc::[]

== âœ¨ Features

* ğŸ“ *AsciiDoc-first*: write posts in `.adoc`.
* âš¡ *Instant deploys*: optimized for Vercel + GitHub.
* ğŸ’¬ *Built-in comments*: choose *giscus* (no backend) or *Waline* (social login) via `/setup`.
* ğŸ”Œ *Custom JS ready*: drop scripts in `/public/js` or create Vercel Functions in `/api`.
* ğŸ§© *Simple config*: one `config.json` written from the Setup UI.
* ğŸš€ *MIT-licensed*: fork, remix, share freely.

== ğŸš€ Quick Start

Follow these steps to run the site locally and deploy to Vercel.

. 1 â€” Install dependencies

  ```bash
  npm install
  ```

. 2 â€” Start the development server (live reload)

  ```bash
  npm run dev
  ```

  By default Eleventy serves the site at http://localhost:8080 â€” the port is printed in the terminal.

. 3 â€” Build for production

  ```bash
  npm run build
  ```

  The static output is written to the `_site/` directory (the value used in `vercel.json`).

. 4 â€” Clean build output

  ```bash
  npm run clean
  ```

. 5 â€” Write a post

  Add `.adoc` files to `src/posts/` (example: `src/posts/hello.adoc`). Eleventy + Asciidoctor will render them to `_site/posts/`.

. 6 â€” Configure comments (optional)

  Visit `/setup` on your deployed site and choose **giscus** or **Waline**. To allow the Setup UI to write `config.json` back to your repo you'll need to set environment variables (see notes below).

. 7 â€” Deploy to Vercel

  - Connect your repository on https://vercel.com and set the build command to `npm run build` and the output directory to `_site`.

[NOTE]
====
To enable the Setup page to save the generated `config.json` back to your repository you must set the following environment variables in Vercel (or locally for testing):

* `VERCEL_GITHUB_TOKEN` â€” a personal access token with `repo` scope
* `GITHUB_REPO` â€” the repo slug, for example `youruser/fast-adoc-blog`

If you don't set them, the Setup UI still works in preview mode (it stores the config in `localStorage`) and you can copy & commit the JSON manually.
====

[NOTE]
====
The Setup page can save `config.json` back to your repo if you set:

* `VERCEL_GITHUB_TOKEN` (PAT with `repo` scope)
* `GITHUB_REPO` (e.g., `youruser/fast-adoc-blog`)

If you donâ€™t set them, Setup still works in *preview mode* (stores in `localStorage`). You can copy the JSON and commit manually.
====

== ğŸ’¬ Comments Options

* *giscus* â†’ GitHub Discussions, no backend required.
* *Waline* â†’ Serverless backend (Vercel deploy), supports Google/GitHub/Twitter/Facebook logins.

You can switch anytime at `/setup`.

== ğŸ›  Adding Custom Features

=== Client-only JS

Place files in `/public/js/` and reference them in `base.njk`:

[source,html]
----
<script src="/js/feature.js" defer></script>
----

*Example: a tiny pageview counter using `localStorage`*:

[source,javascript]
----
// public/js/feature.js
(() => {
  const k = "pageviews:" + location.pathname;
  const n = (parseInt(localStorage.getItem(k), 10) || 0) + 1;
  localStorage.setItem(k, n);
  const el = document.querySelector("[data-pageviews]");
  if (el) el.textContent = n.toString();
})();
----

In a template:

[source,html]
----
<span data-pageviews>0</span> views
----

=== Vercel Functions (serverless)

Add files in `/api/` â€” they deploy as endpoints automatically:

[source,javascript]
----
// api/ping.js
export default () =>
  new Response(JSON.stringify({ ok: true }), {
    headers: { "content-type": "application/json" }
  });
----

Client call:

[source,javascript]
----
fetch("/api/ping").then(r => r.json()).then(console.log);
----

=== Edge Functions (low latency)

[source,javascript]
----
export const config = { runtime: "edge" };

export default async function handler(req) {
  const url = new URL(req.url);
  const name = url.searchParams.get("name") || "world";
  return new Response(`hello, ${name}`, {
    headers: { "content-type": "text/plain" }
  });
}
----

== ğŸ—‚ Project Structure

[source,text]
----
fast-adoc-blog/
â”œâ”€ src/
â”‚  â”œâ”€ posts/        # your .adoc posts
â”‚  â”œâ”€ _includes/    # templates (base, post, comments, setup)
â”‚  â””â”€ index.njk     # homepage
â”œâ”€ public/          # static assets (css, js)
â”œâ”€ api/             # optional serverless/edge functions
â”œâ”€ config.json      # generated by /setup (comments config)
â”œâ”€ .eleventy.js     # 11ty + AsciiDoc config
â”œâ”€ package.json
â””â”€ vercel.json
----

== ğŸ”§ Configuration (generated)

The interactive `/setup` page writes a small `config.json`:

[source,json]
----
{
  "commentsProvider": "giscus",
  "giscus": {
    "repo": "",
    "repoId": "",
    "category": "",
    "categoryId": "",
    "mapping": "pathname",
    "theme": "light",
    "lang": "en"
  },
  "waline": {
    "serverURL": ""
  }
}
----

[TIP]
====
You can keep `commentsProvider` set to `off` to disable comments entirely.
====

== ğŸ§ª Demo Post: `src/posts/hello.adoc`

[source,adoc]
----
= Hello, AsciiDoc
:page-layout: post.njk
:toc:

This is an `.adoc` post rendered by 11ty via Asciidoctor.

== Why AsciiDoc?

* Rich semantics and attributes
* Includes, macros, and callouts
* Plays great with CI/CD

toc::[]
----

== ğŸ“¦ Scripts

[source,json]
----
{
  "scripts": {
    "dev": "ELEVENTY_ENV=development npx @11ty/eleventy --serve",
    "build": "npx @11ty/eleventy",
    "clean": "rm -rf _site"
  }
}
----

== ğŸ“œ License

MIT â€” use, share, remix freely. Contributions welcome via PRs & Issues.

== â¤ï¸ Credits

Built with AsciiDoc, Eleventy, and Vercel.
